{
  "$schema": "https://railway.app/railway.schema.json",
  "name": "BillionMail",
  "description": "Self-hosted email marketing platform and mail server",
  "services": [
    {
      "name": "BillionMail",
      "source": {
        "repo": "https://github.com/protemplate/billionmail-railway"
      },
      "variables": {
        "BILLIONMAIL_HOSTNAME": {
          "description": "Your mail server domain (e.g., mail.example.com)",
          "required": true
        },
        "ADMIN_EMAIL": {
          "description": "Administrator email address",
          "required": true
        },
        "ADMIN_PASSWORD": {
          "description": "Admin password for BillionMail",
          "default": "${{secret()}}",
          "required": false
        },
        "DATABASE_URL": {
          "description": "PostgreSQL connection string",
          "default": "${{Postgres.DATABASE_URL}}",
          "required": false
        },
        "POSTGRES_HOST": {
          "default": "${{Postgres.RAILWAY_PRIVATE_DOMAIN}}",
          "required": false
        },
        "POSTGRES_PORT": {
          "default": "${{Postgres.PGPORT}}",
          "required": false
        },
        "POSTGRES_DB": {
          "default": "${{Postgres.PGDATABASE}}",
          "required": false
        },
        "POSTGRES_USER": {
          "default": "${{Postgres.PGUSER}}",
          "required": false
        },
        "POSTGRES_PASSWORD": {
          "default": "${{Postgres.PGPASSWORD}}",
          "required": false
        },
        "REDIS_URL": {
          "description": "Redis connection string",
          "default": "${{Redis.REDIS_URL}}",
          "required": false
        },
        "REDIS_HOST": {
          "default": "${{Redis.RAILWAY_PRIVATE_DOMAIN}}",
          "required": false
        },
        "REDIS_PORT": {
          "default": "${{Redis.REDISPORT}}",
          "required": false
        },
        "REDIS_PASSWORD": {
          "default": "${{Redis.REDISPASSWORD}}",
          "required": false
        },
        "RAILWAY_PUBLIC_DOMAIN": {
          "default": "${{RAILWAY_PUBLIC_DOMAIN}}",
          "required": false
        },
        "PORT": {
          "default": "${{PORT}}",
          "required": false
        },
        "TZ": {
          "description": "Timezone",
          "default": "UTC",
          "required": false
        },
        "APP_ENV": {
          "description": "Application environment",
          "default": "production",
          "required": false
        },
        "LOG_LEVEL": {
          "description": "Log level (debug, info, warn, error)",
          "default": "info",
          "required": false
        },
        "SECRET_KEY": {
          "description": "Secret key for session encryption",
          "default": "${{secret()}}",
          "required": false
        },
        "STORAGE_PATH": {
          "default": "/app/storage",
          "required": false
        },
        "MAIL_STORAGE_PATH": {
          "default": "/app/storage/mail",
          "required": false
        },
        "CONFIG_PATH": {
          "default": "/app/storage/config",
          "required": false
        },
        "LOG_PATH": {
          "default": "/app/storage/logs",
          "required": false
        },
        "DATA_PATH": {
          "default": "/app/storage/data",
          "required": false
        },
        "TEMP_PATH": {
          "default": "/app/storage/temp",
          "required": false
        },
        "SSL_TYPE": {
          "description": "SSL certificate type (letsencrypt, self-signed)",
          "default": "letsencrypt",
          "required": false
        },
        "LETSENCRYPT_EMAIL": {
          "default": "${{ADMIN_EMAIL}}",
          "required": false
        },
        "ENABLE_WEBMAIL": {
          "description": "Enable Roundcube webmail",
          "default": "true",
          "required": false
        },
        "ENABLE_API": {
          "description": "Enable API",
          "default": "true",
          "required": false
        },
        "ENABLE_ANALYTICS": {
          "description": "Enable analytics tracking",
          "default": "true",
          "required": false
        },
        "ENABLE_MARKETING": {
          "description": "Enable marketing features",
          "default": "true",
          "required": false
        },
        "ENABLE_IMAP": {
          "description": "Enable IMAP protocol",
          "default": "true",
          "required": false
        },
        "ENABLE_POP3": {
          "description": "Enable POP3 protocol",
          "default": "true",
          "required": false
        },
        "ENABLE_SUBMISSION": {
          "description": "Enable mail submission",
          "default": "true",
          "required": false
        },
        "FAIL2BAN_ENABLED": {
          "description": "Enable Fail2ban (resource intensive)",
          "default": "false",
          "required": false
        },
        "ANTIVIRUS_ENABLED": {
          "description": "Enable ClamAV antivirus (resource intensive)",
          "default": "false",
          "required": false
        },
        "SPAM_FILTER_ENABLED": {
          "description": "Enable spam filtering",
          "default": "true",
          "required": false
        },
        "DKIM_ENABLED": {
          "description": "Enable DKIM signing",
          "default": "true",
          "required": false
        },
        "SPF_ENABLED": {
          "description": "Enable SPF checking",
          "default": "true",
          "required": false
        },
        "DMARC_ENABLED": {
          "description": "Enable DMARC policy",
          "default": "true",
          "required": false
        },
        "ENABLE_CACHING": {
          "default": "true",
          "required": false
        },
        "ENABLE_COMPRESSION": {
          "default": "true",
          "required": false
        },
        "MAX_MESSAGE_SIZE": {
          "description": "Maximum message size",
          "default": "25M",
          "required": false
        },
        "MAX_CONNECTIONS": {
          "description": "Maximum concurrent connections",
          "default": "100",
          "required": false
        },
        "POSTMASTER_EMAIL": {
          "default": "${{ADMIN_EMAIL}}",
          "required": false
        },
        "ABUSE_EMAIL": {
          "default": "${{ADMIN_EMAIL}}",
          "required": false
        },
        "DEFAULT_QUOTA": {
          "description": "Default mailbox quota",
          "default": "1G",
          "required": false
        },
        "HTTP_PORT": {
          "default": "80",
          "required": false
        },
        "HTTPS_PORT": {
          "default": "443",
          "required": false
        },
        "ADMIN_PORT": {
          "default": "8080",
          "required": false
        },
        "SMTP_PORT": {
          "default": "25",
          "required": false
        },
        "SUBMISSION_PORT": {
          "default": "587",
          "required": false
        },
        "SMTPS_PORT": {
          "default": "465",
          "required": false
        },
        "IMAP_PORT": {
          "default": "143",
          "required": false
        },
        "IMAPS_PORT": {
          "default": "993",
          "required": false
        },
        "POP3_PORT": {
          "default": "110",
          "required": false
        },
        "POP3S_PORT": {
          "default": "995",
          "required": false
        },
        "BIND_ADDRESS": {
          "default": "::",
          "required": false
        },
        "HOSTNAME": {
          "default": "::",
          "required": false
        },
        "HEALTH_CHECK_INTERVAL": {
          "default": "30",
          "required": false
        },
        "HEALTH_CHECK_TIMEOUT": {
          "default": "10",
          "required": false
        },
        "DB_POOL_SIZE": {
          "default": "20",
          "required": false
        },
        "DB_MAX_OVERFLOW": {
          "default": "40",
          "required": false
        },
        "DB_POOL_TIMEOUT": {
          "default": "30",
          "required": false
        },
        "REDIS_POOL_SIZE": {
          "default": "10",
          "required": false
        },
        "REDIS_MAX_CONNECTIONS": {
          "default": "50",
          "required": false
        },
        "ROUNDCUBE_DES_KEY": {
          "description": "Roundcube encryption key",
          "default": "${{secret(24)}}",
          "required": false
        },
        "ROUNDCUBE_DEFAULT_HOST": {
          "default": "localhost",
          "required": false
        },
        "ROUNDCUBE_SMTP_SERVER": {
          "default": "localhost",
          "required": false
        },
        "ROUNDCUBE_SMTP_PORT": {
          "default": "587",
          "required": false
        }
      },
      "volumes": [
        {
          "mount": "/app/storage",
          "name": "billionmail-storage"
        }
      ]
    }
  ]
}