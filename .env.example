# ========================================
# BILLIONMAIL RAILWAY CONFIGURATION
# ========================================
# This file is for local development only.
# For Railway deployment, these variables are set automatically
# using Railway reference variables in railway.toml

# ========================================
# RAILWAY REFERENCE VARIABLES
# ========================================
# These are automatically set by Railway when you connect services:

# PostgreSQL Service (automatically provided by Railway)
DATABASE_URL=${{Postgres.DATABASE_URL}}
POSTGRES_HOST=${{Postgres.RAILWAY_PRIVATE_DOMAIN}}
POSTGRES_PORT=${{Postgres.PGPORT}}
POSTGRES_DB=${{Postgres.PGDATABASE}}
POSTGRES_USER=${{Postgres.PGUSER}}
POSTGRES_PASSWORD=${{Postgres.PGPASSWORD}}

# Redis Service (automatically provided by Railway)
REDIS_URL=${{Redis.REDIS_URL}}
REDIS_HOST=${{Redis.RAILWAY_PRIVATE_DOMAIN}}
REDIS_PORT=${{Redis.REDISPORT}}
REDIS_PASSWORD=${{Redis.REDISPASSWORD}}

# Railway Platform Variables
RAILWAY_PUBLIC_DOMAIN=${{RAILWAY_PUBLIC_DOMAIN}}
RAILWAY_PRIVATE_DOMAIN=${{RAILWAY_PRIVATE_DOMAIN}}
RAILWAY_ENVIRONMENT=${{RAILWAY_ENVIRONMENT}}
PORT=${{PORT}}

# ========================================
# REQUIRED USER CONFIGURATION
# ========================================
# You MUST set these in Railway dashboard:

# Your mail server domain (e.g., mail.yourdomain.com)
BILLIONMAIL_HOSTNAME=mail.example.com

# Admin email address for the mail server
ADMIN_EMAIL=admin@example.com

# Admin password (Railway will auto-generate if using ${{secret()}})
ADMIN_PASSWORD=changeme

# ========================================
# APPLICATION CONFIGURATION
# ========================================

# Application environment
APP_ENV=production

# Timezone
TZ=UTC

# Log level (debug, info, warn, error)
LOG_LEVEL=info

# Secret key for session encryption (auto-generated by Railway)
SECRET_KEY=your-secret-key-here

# ========================================
# SSL/TLS CONFIGURATION
# ========================================

# SSL certificate type (letsencrypt, self-signed, manual)
SSL_TYPE=letsencrypt

# Let's Encrypt email (uses ADMIN_EMAIL if not set)
LETSENCRYPT_EMAIL=${ADMIN_EMAIL}

# ========================================
# FEATURE TOGGLES
# ========================================

# Core features
ENABLE_WEBMAIL=true
ENABLE_API=true
ENABLE_ANALYTICS=true
ENABLE_MARKETING=true

# Mail protocols
ENABLE_IMAP=true
ENABLE_POP3=true
ENABLE_SUBMISSION=true

# Security features (resource intensive, disabled by default on Railway)
FAIL2BAN_ENABLED=false
ANTIVIRUS_ENABLED=false
SPAM_FILTER_ENABLED=true

# Mail authentication
DKIM_ENABLED=true
SPF_ENABLED=true
DMARC_ENABLED=true

# ========================================
# PERFORMANCE SETTINGS
# ========================================

# Caching and optimization
ENABLE_CACHING=true
ENABLE_COMPRESSION=true

# Resource limits
MAX_MESSAGE_SIZE=25M
MAX_CONNECTIONS=100
DEFAULT_QUOTA=1G

# Database connection pool
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=40
DB_POOL_TIMEOUT=30

# Redis connection pool
REDIS_POOL_SIZE=10
REDIS_MAX_CONNECTIONS=50

# ========================================
# STORAGE PATHS (Railway Volume)
# ========================================

# Base storage path (Railway volume mount point)
STORAGE_PATH=/app/storage

# Subdirectories (automatically created)
MAIL_STORAGE_PATH=/app/storage/mail
CONFIG_PATH=/app/storage/config
LOG_PATH=/app/storage/logs
DATA_PATH=/app/storage/data
TEMP_PATH=/app/storage/temp

# ========================================
# SERVICE PORTS
# ========================================

# Web interface ports
HTTP_PORT=80
HTTPS_PORT=443
ADMIN_PORT=8080

# Mail server ports (configure Railway TCP Proxy for these)
SMTP_PORT=25
SUBMISSION_PORT=587
SMTPS_PORT=465
IMAP_PORT=143
IMAPS_PORT=993
POP3_PORT=110
POP3S_PORT=995

# ========================================
# RAILWAY NETWORKING
# ========================================

# IPv6 configuration for Railway private networking
BIND_ADDRESS=::
HOSTNAME=::

# ========================================
# HEALTH CHECK CONFIGURATION
# ========================================

HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10
HEALTH_CHECK_PATH=/health

# ========================================
# ROUNDCUBE WEBMAIL CONFIGURATION
# ========================================

# Roundcube encryption key (auto-generated by Railway)
ROUNDCUBE_DES_KEY=changeme24characterslong

# Roundcube mail server settings
ROUNDCUBE_DEFAULT_HOST=localhost
ROUNDCUBE_SMTP_SERVER=localhost
ROUNDCUBE_SMTP_PORT=587

# ========================================
# LOCAL DEVELOPMENT OVERRIDES
# ========================================
# Uncomment these for local Docker development:

# DATABASE_URL=postgresql://billionmail:billionmail@localhost:5432/billionmail
# REDIS_URL=redis://localhost:6379
# BILLIONMAIL_HOSTNAME=localhost
# ADMIN_EMAIL=admin@localhost
# ADMIN_PASSWORD=localpassword
# APP_ENV=development
# LOG_LEVEL=debug
# SSL_TYPE=self-signed
# ENABLE_CACHING=false
# FAIL2BAN_ENABLED=false
# ANTIVIRUS_ENABLED=false